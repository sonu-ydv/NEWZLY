<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <!-- Self-Contained SVG Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3csvg width='32' height='32' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='24' height='24' rx='4' fill='%2306B6D4'/%3e%3cpath d='M12.5 2.25L5.875 11.25V2.25H2.5V21.75H5.875V12.75L12.5 21.75H15.875V2.25H12.5Z' fill='white'/%3e%3cpath d='M18.125 2.25H21.5V21.75H18.125V2.25Z' fill='white'/%3e%3c/svg%3e" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Primary Meta Tags -->
    <title>NEWZLY - AI News Writer & Video Creator</title>
    <meta name="title" content="NEWZLY - AI News Writer & Video Creator">
    <meta name="description" content="An AI-powered platform to generate professional, human-like news articles from a URL, create SEO-optimized social media posts, and stunning summary videos.">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://newzly.ai/">
    <meta property="og:title" content="NEWZLY - AI News Writer & Video Creator">
    <meta property="og:description" content="Generate high-quality articles, social campaigns, and videos in minutes with the power of AI.">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://newzly.ai/">
    <meta property="twitter:title" content="NEWZLY - AI News Writer & Video Creator">
    <meta property="twitter:description" content="Generate high-quality articles, social campaigns, and videos in minutes with the power of AI.">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- FOUC Handler Script -->
    <script>
      // Handles FOUC. Sets 'dark' class if theme is dark in localStorage
      // or if system preference is dark and no localStorage is set.
      // Otherwise, defaults to light (no class).
      (function() {
        try {
          var theme = localStorage.getItem('newzly-theme');
          if (theme === 'dark') {
            document.documentElement.classList.add('dark');
          } else if (!theme && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
          }
        } catch (e) {
          // If any error, do nothing (default to light) to be safe.
        }
      })();
    </script>
    
    <!-- Inline Styles for Animations -->
    <style>
      html {
        font-size: 15px;
      }
      body {
        font-family: 'Inter', sans-serif;
        background-color: #f8fafc; /* light: slate-50 */
      }
      html.dark body {
        background-color: #0f172a; /* dark: slate-900 */
      }
      @keyframes rotate-in {
        from {
          transform: rotate(-90deg) scale(0.5);
          opacity: 0;
        }
        to {
          transform: rotate(0deg) scale(1);
          opacity: 1;
        }
      }
      .animate-rotate-in {
        animation: rotate-in 0.3s ease-out;
      }
      @keyframes fade-in {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      .animate-fade-in { animation: fade-in 0.5s ease-out forwards; }
      @keyframes scale-in {
        from { transform: scale(0.95); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
      }
      .animate-scale-in { animation: scale-in 0.2s ease-out forwards; }
    </style>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      // This configures Tailwind CSS to use class-based dark mode.
      // It MUST come before the main Tailwind script is processed.
      tailwind.config = {
        darkMode: 'class',
      }
    </script>
    
    <!-- ES Module Shims & Import Map -->
  <script type="importmap">
{
  "imports": {
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.17.0"
  }
}
</script>
</head>
  <body class="bg-slate-50 dark:bg-slate-900">
    <noscript>
      You need to enable JavaScript to run this app. NEWZLY is a modern web application that relies on JavaScript to provide its AI-powered features.
    </noscript>
    <div id="root"></div>
    <script type="module">
    try {
        // CDN Imports
        const { default: React, useState, useCallback, useEffect, useMemo, useRef } = await import('react');
        const { default: ReactDOM } = await import('react-dom/client');
        const { GoogleGenAI, Type } = await import('@google/genai');

        // --- Inlined from types.ts ---
        const Platform = {
            Facebook: 'Facebook',
            Instagram: 'Instagram',
            Twitter: 'Twitter',
            LinkedIn: 'LinkedIn',
        };

        // --- Inlined from components/icons.tsx ---
        const FacebookIcon = () => (
            React.createElement('svg', { className: "w-6 h-6 text-blue-500", fill: "currentColor", viewBox: "0 0 24 24", "aria-hidden": "true" },
                React.createElement('path', { fillRule: "evenodd", d: "M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z", clipRule: "evenodd" })
            )
        );
        const InstagramIcon = () => (
            React.createElement('svg', { className: "w-6 h-6 text-pink-500", fill: "currentColor", viewBox: "0 0 24 24", "aria-hidden": "true" },
                React.createElement('path', { d: "M12 2C8.7 2 8.3 2.1 7.1 2.4c-1.2.3-2.2.8-3.1 1.7s-1.4 1.9-1.7 3.1C2.1 8.3 2 8.7 2 12s.1 3.7 2.4 4.9c.3 1.2.8 2.2 1.7 3.1s1.9 1.4 3.1 1.7c1.2.3 1.6.4 4.9.4s3.7-.1 4.9-2.4c1.2-.3 2.2-.8 3.1-1.7s1.4-1.9 1.7-3.1c.3-1.2.4-1.6.4-4.9s-.1-3.7-2.4-4.9c-.3-1.2-.8-2.2-1.7-3.1s-1.9-1.4-3.1-1.7C15.7 2.1 15.3 2 12 2zm0 1.8c3.2 0 3.6 0 4.8.1.9.1 1.5.3 1.9.5.6.3.9.6 1.2 1.2.3.6.5 1.1.5 1.9.1 1.2.1 1.6.1 4.8s0 3.6-.1 4.8c-.1.9-.3 1.5-.5 1.9-.3.6-.6.9-1.2 1.2-.6.3-1.1.5-1.9.5-1.2.1-1.6.1-4.8.1s-3.6 0-4.8-.1c-.9-.1-1.5-.3-1.9-.5-.6-.3-.9-.6-1.2-1.2-.3-.6-.5-1.1-.5-1.9-.1-1.2-.1-1.6-.1-4.8s0-3.6.1-4.8c.1-.9.3-1.5.5-1.9.3-.6.6-.9 1.2-1.2.6-.3 1.1-.5 1.9-.5 1.2-.1 1.6-.1 4.8-.1zM12 7.2c-2.7 0-4.8 2.2-4.8 4.8s2.2 4.8 4.8 4.8 4.8-2.2 4.8-4.8-2.1-4.8-4.8-4.8zm0 7.8c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3zm4.9-7.7c-.6 0-1.1.5-1.1 1.1s.5 1.1 1.1 1.1 1.1-.5 1.1-1.1-.5-1.1-1.1-1.1z" })
            )
        );
        const TwitterIcon = () => (
            React.createElement('svg', { className: "w-6 h-6 text-sky-400", fill: "currentColor", viewBox: "0 0 24 24", "aria-hidden": "true" },
                React.createElement('path', { d: "M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231L18.244 2.25zM17.633 19.75h1.56l-9.52-12.834H7.93l9.703 12.834z" })
            )
        );
        const LinkedInIcon = () => (
            React.createElement('svg', { className: "w-6 h-6 text-sky-600", fill: "currentColor", viewBox: "0 0 24 24", "aria-hidden": "true" },
                React.createElement('path', { d: "M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" })
            )
        );
        const CopyIcon = ({ className = 'w-5 h-5' }) => (
            React.createElement('svg', { className: className, fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: "2", d: "M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" })
            )
        );
        const CheckIcon = ({ className = 'w-5 h-5' }) => (
            React.createElement('svg', { className: className, fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: "2", d: "M5 13l4 4L19 7" })
            )
        );
        const SunIcon = ({ className = '' }) => (
            React.createElement('svg', { className: `w-6 h-6 ${className}`, fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: "2", d: "M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" })
            )
        );
        const MoonIcon = ({ className = '' }) => (
            React.createElement('svg', { className: `w-6 h-6 ${className}`, fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: "2", d: "M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" })
            )
        );
        const LinkIcon = ({ className = 'w-5 h-5' }) => (
            React.createElement('svg', { className: className, fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" })
            )
        );
        const RefreshIcon = ({ className = 'w-5 h-5' }) => (
            React.createElement('svg', { className: className, fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M4 4v5h5M20 20v-5h-5M15 4h5v5M9 20H4v-5M20 14.66V12A8 8 0 1012 20a8 8 0 00-1.34-.05" })
            )
        );
        const EditIcon = ({ className = 'w-5 h-5' }) => (
            React.createElement('svg', { className: className, fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" })
            )
        );
        const SaveIcon = ({ className = 'w-5 h-5' }) => (
            React.createElement('svg', { className: className, fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" })
            )
        );
        const LogoIcon = ({ className = 'w-8 h-8' }) => (
            React.createElement('svg', { className: className, viewBox: "0 0 24 24", fill: "none", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { d: "M12 2L2 7L12 12L22 7L12 2Z", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }),
                React.createElement('path', { d: "M2 17L12 22L22 17", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }),
                React.createElement('path', { d: "M2 12L12 17L22 12", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" })
            )
        );
        const NewzlyLogoIcon = ({ className = 'w-8 h-8' }) => (
            React.createElement('svg', { className: className, viewBox: "0 0 24 24", fill: "none", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { d: "M12.5 2.25L5.875 11.25V2.25H2.5V21.75H5.875V12.75L12.5 21.75H15.875V2.25H12.5Z", fill: "currentColor" }),
                React.createElement('path', { d: "M18.125 2.25H21.5V21.75H18.125V2.25Z", fill: "currentColor" })
            )
        );
        const VideoIcon = ({ className = 'w-5 h-5' }) => (
            React.createElement('svg', { className: className, fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { d: "m22 8-6 4 6 4V8Z" }),
                React.createElement('rect', { width: "14", height: "12", x: "2", y: "6", rx: "2", ry: "2" })
            )
        );
        const DownloadIcon = ({ className = 'w-5 h-5' }) => (
            React.createElement('svg', { className: className, fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
              React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" })
            )
        );
        const ArticleIcon = ({ className = 'w-8 h-8' }) => (
            React.createElement('svg', { className: className, fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" })
            )
        );
        const SocialIcon = ({ className = 'w-8 h-8' }) => (
            React.createElement('svg', { className: className, fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" })
            )
        );
        const InputIcon = ({ className = 'w-8 h-8' }) => (
            React.createElement('svg', { className: className, fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { d: "M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" }),
                React.createElement('path', { d: "M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" })
            )
        );
        const PublishIcon = ({ className = 'w-8 h-8' }) => (
            React.createElement('svg', { className: className, fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { d: "M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" }),
                React.createElement('polyline', { points: "16 6 12 2 8 6" }),
                React.createElement('line', { x1: "12", y1: "2", x2: "12", y2: "15" })
            )
        );
        const TagIcon = ({ className = 'w-5 h-5' }) => (
            React.createElement('svg', { className: className, fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
                React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: "2", d: "M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-10 10a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l10-10z" }),
                React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: "2", d: "M15 9a1 1 0 11-2 0 1 1 0 012 0z" })
            )
        );

        // --- Inlined from components/ThemeSwitcher.tsx ---
        const ThemeSwitcher = ({ theme, onToggleTheme }) => {
            const isDark = theme === 'dark';
            return (
                React.createElement('button', {
                    onClick: onToggleTheme,
                    className: `relative w-14 h-8 flex items-center rounded-full p-1 cursor-pointer transition-colors duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500 dark:focus:ring-offset-slate-900 ${isDark ? 'bg-slate-700' : 'bg-cyan-500'}`,
                    'aria-label': `Switch to ${isDark ? 'light' : 'dark'} mode`,
                    role: "switch",
                    'aria-checked': isDark
                },
                    React.createElement('span', { className: "sr-only" }, "Toggle theme"),
                    React.createElement('div', {
                        className: `bg-white w-6 h-6 rounded-full shadow-md transform transition-transform duration-300 ease-in-out flex items-center justify-center relative overflow-hidden ${isDark ? 'translate-x-6' : 'translate-x-0'}`
                    },
                        React.createElement('div', { className: `absolute transition-all duration-300 ease-in-out ${isDark ? 'opacity-0 -rotate-90 scale-50' : 'opacity-100 rotate-0 scale-100'}` },
                            React.createElement(SunIcon, { className: "text-cyan-500 w-4 h-4" })
                        ),
                        React.createElement('div', { className: `absolute transition-all duration-300 ease-in-out ${isDark ? 'opacity-100 rotate-0 scale-100' : 'opacity-0 rotate-90 scale-50'}` },
                            React.createElement(MoonIcon, { className: "text-slate-700 w-4 h-4" })
                        )
                    )
                )
            );
        };
        
        // --- Inlined from components/Header.tsx ---
        const Header = ({ onClear, hasContent, theme, onToggleTheme, onShowModal, activeView, onNavigate }) => {
          const navLinkClasses = "text-slate-600 dark:text-slate-300 hover:text-cyan-500 dark:hover:text-cyan-400 transition-colors";
          const activeLinkClasses = "text-cyan-500 dark:text-cyan-400 font-semibold";

          const renderNavLinks = () => {
              if (activeView === 'homepage') {
                  return (
                      React.createElement(React.Fragment, null,
                        React.createElement('button', { onClick: () => onShowModal('about'), className: navLinkClasses }, "About"),
                        React.createElement('button', { onClick: () => onShowModal('privacy'), className: navLinkClasses }, "Privacy Policy"),
                        React.createElement('button', { onClick: () => onShowModal('contact'), className: navLinkClasses }, "Contact")
                      )
                  );
              }
              return (
                  React.createElement(React.Fragment, null,
                    React.createElement('button', { onClick: () => onNavigate('nstudio'), className: `${navLinkClasses} ${activeView === 'nstudio' ? activeLinkClasses : ''}` }, "N'Studio"),
                    React.createElement('button', { onClick: () => onNavigate('vstudio'), className: `${navLinkClasses} ${activeView === 'vstudio' ? activeLinkClasses : ''}` }, "V'Studio")
                  )
              );
          };

          return (
            React.createElement('header', { className: "bg-white/80 dark:bg-slate-900/50 backdrop-blur-sm border-b border-slate-200 dark:border-slate-800 sticky top-0 z-40" },
              React.createElement('div', { className: "container mx-auto px-4 py-4 flex justify-between items-center" },
                React.createElement('button', { onClick: () => onNavigate('homepage'), 'aria-label': "Go to Homepage", className: "flex items-center gap-3" },
                    React.createElement(NewzlyLogoIcon, { className: "h-8 w-8 text-slate-900 dark:text-white" }),
                    React.createElement('h1', { className: "text-2xl font-extrabold text-slate-900 dark:text-white tracking-wide" },
                      "NEWZLY"
                    )
                ),
                React.createElement('div', { className: "flex items-center gap-4" },
                    React.createElement('nav', { className: "hidden sm:flex items-center gap-6 text-sm font-medium" },
                        renderNavLinks()
                    ),
                    React.createElement(ThemeSwitcher, { theme: theme, onToggleTheme: onToggleTheme }),
                    hasContent && activeView === 'nstudio' && (
                        React.createElement('button', {
                            onClick: onClear,
                            className: "bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 ease-in-out text-sm shadow-sm hover:shadow-md",
                            'aria-label': "Start a new article"
                        },
                            "Start New"
                        )
                    )
                )
              )
            )
          );
        };
        
        // --- Inlined from components/UrlInputForm.tsx ---
        const UrlInputForm = ({ onSubmit, isLoading }) => {
          const [url, setUrl] = useState('');
          const handleSubmit = (e) => {
            e.preventDefault();
            onSubmit(url);
          };

          return (
            React.createElement('form', { onSubmit: handleSubmit, className: "flex flex-col sm:flex-row gap-3" },
              React.createElement('div', { className: "relative flex-grow" },
                React.createElement('div', { className: "absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none" },
                  React.createElement(LinkIcon, { className: "text-slate-400 dark:text-slate-500" })
                ),
                React.createElement('input', {
                  type: "url",
                  value: url,
                  onChange: (e) => setUrl(e.target.value),
                  placeholder: "https://example.com/news/article-link",
                  required: true,
                  className: "w-full bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100 border border-slate-300 dark:border-slate-600 rounded-xl pl-11 pr-4 py-4 focus:ring-2 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-800 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition duration-200 disabled:opacity-50",
                  disabled: isLoading
                })
              ),
              React.createElement('button', {
                type: "submit",
                disabled: isLoading,
                className: "bg-gradient-to-r from-cyan-500 to-purple-600 hover:from-cyan-400 hover:to-purple-500 text-white font-bold py-4 px-6 rounded-xl transition duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:scale-100 flex items-center justify-center shadow-md hover:shadow-lg"
              },
                isLoading ? (
                  React.createElement(React.Fragment, null,
                    React.createElement('svg', { className: "animate-spin -ml-1 mr-3 h-5 w-5 text-white", xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24" },
                        React.createElement('circle', { className: "opacity-25", cx: "12", cy: "12", r: "10", stroke: "currentColor", strokeWidth: "4" }),
                        React.createElement('path', { className: "opacity-75", fill: "currentColor", d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" })
                    ),
                    "Generating..."
                  )
                ) : (
                  'Generate Article'
                )
              )
            )
          );
        };
        
        // --- Inlined from components/GenerationOptions.tsx ---
        const GenerationOptions = ({ model, onModelChange, language, onLanguageChange, seoKeywords, onSeoKeywordsChange, isLoading }) => {
            const languageOptions = ["Chinese", "Dutch", "English", "French", "German", "Hindi", "Italian", "Japanese", "Portuguese", "Russian", "Spanish"];
            const modelOptions = [{ value: 'gemini-2.5-flash', label: 'Gemini 2.5 Flash' }];
            return (
                React.createElement('div', { className: "mt-6 space-y-4" },
                    React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 gap-4" },
                        React.createElement('div', null,
                            React.createElement('label', { htmlFor: "model-select", className: "block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2" }, "AI Model"),
                            React.createElement('select', {
                                id: "model-select", value: model, onChange: (e) => onModelChange(e.target.value), disabled: isLoading,
                                className: "w-full bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100 border border-slate-300 dark:border-slate-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-800 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition duration-200 disabled:opacity-50",
                                'aria-label': "Select AI Model"
                            }, modelOptions.map(option => React.createElement('option', { key: option.value, value: option.value }, option.label)))
                        ),
                        React.createElement('div', null,
                            React.createElement('label', { htmlFor: "language-select", className: "block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2" }, "Language"),
                            React.createElement('select', {
                                id: "language-select", value: language, onChange: (e) => onLanguageChange(e.target.value), disabled: isLoading,
                                className: "w-full bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100 border border-slate-300 dark:border-slate-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-800 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition duration-200 disabled:opacity-50",
                                'aria-label': "Select output language"
                            }, languageOptions.map(lang => React.createElement('option', { key: lang, value: lang }, lang)))
                        )
                    ),
                    React.createElement('div', null,
                        React.createElement('label', { htmlFor: "seo-keywords-input", className: "block text-sm font-medium text-slate-500 dark:text-slate-400 mb-2" }, "SEO Keywords (optional)"),
                        React.createElement('div', { className: "relative" },
                            React.createElement('div', { className: "absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none" }, React.createElement(TagIcon, { className: "text-slate-400 dark:text-slate-500" })),
                            React.createElement('input', {
                                id: "seo-keywords-input", type: "text", value: seoKeywords, onChange: (e) => onSeoKeywordsChange(e.target.value),
                                placeholder: "e.g., AI, content creation, tech trends",
                                className: "w-full bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100 border border-slate-300 dark:border-slate-600 rounded-xl pl-11 pr-4 py-3 focus:ring-2 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-800 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition duration-200 disabled:opacity-50",
                                disabled: isLoading, 'aria-label': "Enter comma-separated SEO keywords"
                            })
                        )
                    )
                )
            );
        };

        // --- Inlined from components/ArticleDisplay.tsx ---
        const ArticleDisplay = ({ article, onArticleUpdate, featureImage, onGenerateSocial, isSocialLoading }) => {
            const [isEditing, setIsEditing] = useState(false);
            const [editedTitle, setEditedTitle] = useState(article.title);
            const [editedContent, setEditedContent] = useState(article.articleContent);
            const [copied, setCopied] = useState(false);
            const contentTextareaRef = useRef(null);

            const renderFormattedContent = (content) => {
                return content.split('\n').map((paragraph, index) => {
                    const trimmed = paragraph.trim();
                    if (trimmed.startsWith('## ')) {
                        return React.createElement('h2', { key: index, className: "text-2xl font-bold mt-8 mb-4 text-cyan-600 dark:text-cyan-300" }, trimmed.substring(3));
                    }
                    if (trimmed === '') return null;
                    return React.createElement('p', { key: index, className: "mb-6 text-slate-600 dark:text-slate-300 leading-relaxed text-base" }, trimmed);
                });
            };
            const formattedContent = useMemo(() => renderFormattedContent(article.articleContent), [article.articleContent]);
            
            useEffect(() => {
                if (isEditing && contentTextareaRef.current) {
                    const el = contentTextareaRef.current;
                    el.style.height = 'auto';
                    el.style.height = `${el.scrollHeight}px`;
                }
            }, [isEditing, editedContent]);

            const handleCopy = useCallback(() => {
                const textToCopy = `${article.title}\n\n${article.articleContent}`;
                navigator.clipboard.writeText(textToCopy);
                setCopied(true);
                setTimeout(() => setCopied(false), 2500);
            }, [article.title, article.articleContent]);

            const handleSaveChanges = () => {
                onArticleUpdate({ ...article, title: editedTitle, articleContent: editedContent });
                setIsEditing(false);
            };

            const handleToggleEdit = () => {
                if (isEditing) handleSaveChanges();
                else {
                    setEditedTitle(article.title);
                    setEditedContent(article.articleContent);
                    setIsEditing(true);
                }
            };
            
            return React.createElement('div', { className: "bg-white dark:bg-slate-800 rounded-2xl shadow-lg dark:shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden animate-fade-in" },
                React.createElement('div', { className: "p-6 sm:p-8" },
                    isEditing ?
                        React.createElement('input', { type: "text", value: editedTitle, onChange: (e) => setEditedTitle(e.target.value), className: "w-full text-3xl sm:text-4xl font-extrabold mb-6 bg-slate-100 dark:bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none" }) :
                        React.createElement('h2', { className: "text-3xl sm:text-4xl font-extrabold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-cyan-600 to-purple-600" }, article.title),
                    React.createElement('div', { className: "mb-4" },
                        React.createElement('div', { className: "aspect-video w-full bg-slate-200 dark:bg-slate-700 rounded-xl flex items-center justify-center animate-fade-in overflow-hidden" },
                            featureImage ?
                                React.createElement('img', { src: featureImage, alt: article.title, className: "w-full h-full object-cover" }) :
                                React.createElement('div', { className: "flex flex-col items-center gap-2 text-slate-500 dark:text-slate-400" },
                                    React.createElement('svg', { className: "animate-spin h-8 w-8 text-cyan-500 dark:text-cyan-400", xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24" },
                                        React.createElement('circle', { className: "opacity-25", cx: "12", cy: "12", r: "10", stroke: "currentColor", strokeWidth: "4" }),
                                        React.createElement('path', { className: "opacity-75", fill: "currentColor", d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" })
                                    ),
                                    React.createElement('span', null, "Generating Image...")
                                )
                        )
                    ),
                    React.createElement('div', { className: "mt-8" },
                        isEditing ?
                            React.createElement('textarea', { ref: contentTextareaRef, value: editedContent, onChange: (e) => setEditedContent(e.target.value), className: "w-full bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100 border border-slate-300 dark:border-slate-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition duration-200 resize-none overflow-hidden leading-relaxed", rows: 15 }) :
                            React.createElement('article', null, formattedContent)
                    )
                ),
                React.createElement('div', { className: "sticky bottom-4 z-10 px-4" },
                    React.createElement('div', { className: "max-w-xl mx-auto bg-white/70 dark:bg-slate-800/70 backdrop-blur-sm border border-slate-200 dark:border-slate-700 p-3 flex flex-col sm:flex-row justify-center items-center gap-3 rounded-2xl shadow-lg" },
                        React.createElement('button', { onClick: handleCopy, disabled: isEditing, className: `w-full sm:w-auto flex items-center justify-center gap-2 font-bold py-2 px-6 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${copied ? 'bg-green-100 dark:bg-green-800/50 text-green-600 dark:text-green-300' : 'bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200'}` },
                            copied ? React.createElement(CheckIcon, { className: "w-5 h-5" }) : React.createElement(CopyIcon, { className: "w-5 h-5" }),
                            React.createElement('span', null, copied ? 'Copied!' : 'Copy Article')
                        ),
                        React.createElement('button', { onClick: handleToggleEdit, className: "w-full sm:w-auto flex items-center justify-center gap-2 font-bold py-2 px-6 rounded-lg transition-colors duration-200 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 disabled:opacity-50 disabled:cursor-not-allowed" },
                            isEditing ? React.createElement(SaveIcon, { className: "w-5 h-5" }) : React.createElement(EditIcon, { className: "w-5 h-5" }),
                            React.createElement('span', null, isEditing ? 'Save Changes' : 'Edit Article')
                        ),
                        React.createElement('button', { onClick: onGenerateSocial, disabled: isSocialLoading || isEditing, className: "w-full sm:w-auto bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white font-bold py-2 px-6 rounded-lg transition duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:scale-100 flex items-center justify-center shadow-md hover:shadow-lg" },
                            isSocialLoading ? 'Generating...' : 'Create Social Posts'
                        )
                    )
                )
            );
        };
        
        // --- Inlined from components/SocialMediaPosts.tsx ---
        const SocialMediaPosts = ({ posts, onRegenerate }) => {
            const platformIcons = {
              [Platform.Facebook]: React.createElement(FacebookIcon, null),
              [Platform.Instagram]: React.createElement(InstagramIcon, null),
              [Platform.Twitter]: React.createElement(TwitterIcon, null),
              [Platform.LinkedIn]: React.createElement(LinkedInIcon, null),
            };
            const CHARACTER_LIMITS = {
              [Platform.Twitter]: 280,
              [Platform.Instagram]: 2200,
              [Platform.Facebook]: 5000,
              [Platform.LinkedIn]: 3000,
            };

            const ImageLoaderSkeleton = () => React.createElement('div', { className: "absolute inset-0 bg-slate-200 dark:bg-slate-700 animate-pulse" });

            const SocialPostCard = ({ post }) => {
                const [caption, setCaption] = useState(post.caption);
                const [hashtags, setHashtags] = useState(post.hashtags.join(' '));
                const [copied, setCopied] = useState(false);
                const [imageUrl, setImageUrl] = useState(null);
                const [isImageLoading, setIsImageLoading] = useState(true);
                const [imageError, setImageError] = useState(null);
                const textareaRef = useRef(null);

                const limit = CHARACTER_LIMITS[post.platform];
                const charCount = caption.length;

                useEffect(() => {
                    const generateImage = async () => {
                        if (!post.imagePrompt) {
                            setImageError("No image prompt available.");
                            setIsImageLoading(false); return;
                        }
                        try {
                            setImageError(null); setIsImageLoading(true);
                            const image = await generateSocialPostImage(post.imagePrompt);
                            setImageUrl(image);
                        } catch (e) {
                            console.error(`Failed to generate social post image for ${post.platform}`, e);
                            setImageError("Couldn't generate image.");
                        } finally { setIsImageLoading(false); }
                    };
                    generateImage();
                }, [post.imagePrompt, post.platform]);

                const getCharCountColor = () => {
                    if (!limit) return 'text-slate-400';
                    if (charCount > limit) return 'text-red-500 font-bold';
                    if (charCount > limit * 0.9) return 'text-amber-500 font-semibold';
                    return 'text-slate-500 dark:text-slate-400';
                };

                useEffect(() => {
                    const el = textareaRef.current;
                    if (el) { el.style.height = 'auto'; el.style.height = `${el.scrollHeight}px`; }
                }, [caption]);

                const handleCopy = useCallback(() => {
                    navigator.clipboard.writeText(`${caption}\n\n${hashtags}`);
                    setCopied(true);
                    setTimeout(() => setCopied(false), 2000);
                }, [caption, hashtags]);

                return React.createElement('div', { className: "bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 flex flex-col focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-slate-50 dark:focus-within:ring-offset-slate-900 focus-within:ring-cyan-500 transition-all duration-200 animate-scale-in overflow-hidden" },
                    React.createElement('div', { className: "relative w-full aspect-square bg-slate-100 dark:bg-slate-700" },
                        isImageLoading && React.createElement(ImageLoaderSkeleton, null),
                        imageError && !isImageLoading && React.createElement('div', { className: "absolute inset-0 flex items-center justify-center text-center p-4 text-red-500 dark:text-red-400 bg-red-50 dark:bg-red-900/20" }, React.createElement('p', null, imageError)),
                        imageUrl && !isImageLoading && React.createElement('img', { src: imageUrl, alt: `${post.platform} post image`, className: "w-full h-full object-cover" })
                    ),
                    React.createElement('div', { className: "p-4 flex items-center justify-between border-b border-slate-200 dark:border-slate-700" },
                        React.createElement('div', { className: "flex items-center gap-3" },
                            platformIcons[post.platform],
                            React.createElement('h3', { className: "text-xl font-bold text-slate-900 dark:text-white" }, post.platform)
                        )
                    ),
                    React.createElement('div', { className: "p-5 flex-grow flex flex-col gap-4" },
                        React.createElement('div', null,
                            React.createElement('label', { htmlFor: `caption-${post.platform}`, className: "block text-sm font-medium text-slate-500 dark:text-slate-400 mb-1" }, "Caption"),
                            React.createElement('textarea', { id: `caption-${post.platform}`, ref: textareaRef, value: caption, onChange: (e) => setCaption(e.target.value), className: "w-full bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100 border border-slate-300 dark:border-slate-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition duration-200 resize-none overflow-hidden", rows: 4 }),
                            React.createElement('div', { className: `text-xs text-right mt-1.5 pr-1 ${getCharCountColor()}` }, charCount, limit ? ` / ${limit}` : '')
                        ),
                        React.createElement('div', null,
                            React.createElement('label', { htmlFor: `hashtags-${post.platform}`, className: "block text-sm font-medium text-slate-500 dark:text-slate-400 mb-1" }, "Hashtags"),
                            React.createElement('input', { id: `hashtags-${post.platform}`, type: "text", value: hashtags, onChange: (e) => setHashtags(e.target.value), placeholder: "#tagone #tagtwo #tagthree", className: "w-full bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100 border border-slate-300 dark:border-slate-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition duration-200" })
                        )
                    ),
                    React.createElement('div', { className: "p-4 border-t border-slate-200 dark:border-slate-700 mt-auto" },
                        React.createElement('button', { onClick: handleCopy, className: `w-full flex items-center justify-center gap-2 font-semibold py-2 px-4 rounded-lg transition-colors duration-200 ${copied ? 'bg-green-100 dark:bg-green-800/50 text-green-600 dark:text-green-300' : 'bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300'}` },
                            copied ? React.createElement(CheckIcon, { className: "w-5 h-5" }) : React.createElement(CopyIcon, { className: "w-5 h-5" }),
                            React.createElement('span', null, copied ? 'Copied!' : 'Copy Post')
                        )
                    )
                );
            };

            return React.createElement('div', { className: "mt-8 lg:mt-0 animate-fade-in" },
                React.createElement('div', { className: "flex justify-between items-center mb-6" },
                    React.createElement('h2', { className: "text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-indigo-600" }, "Social Toolkit"),
                    React.createElement('button', { onClick: onRegenerate, className: "flex items-center gap-2 text-sm font-semibold text-slate-600 dark:text-slate-300 hover:text-cyan-500 dark:hover:text-cyan-400 transition-colors", 'aria-label': "Regenerate social media posts" },
                        React.createElement(RefreshIcon, { className: "w-5 h-5" }),
                        React.createElement('span', null, "Regenerate")
                    )
                ),
                React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-6" },
                    posts.map(post => React.createElement(SocialPostCard, { key: post.platform, post: post }))
                )
            );
        };

        // --- Inlined from components/Loader.tsx ---
        const Loader = ({ steps }) => {
            const StatusIcon = ({ status }) => {
                if (status === 'done') return React.createElement('div', { className: "w-6 h-6 rounded-full bg-green-500 flex items-center justify-center" }, React.createElement(CheckIcon, { className: "w-4 h-4 text-white" }));
                if (status === 'active') return React.createElement('div', { className: "w-6 h-6" },
                    React.createElement('svg', { className: "animate-spin text-cyan-500", xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24" },
                        React.createElement('circle', { className: "opacity-25", cx: "12", cy: "12", r: "10", stroke: "currentColor", strokeWidth: "4" }),
                        React.createElement('path', { className: "opacity-75", fill: "currentColor", d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" })
                    )
                );
                return React.createElement('div', { className: "w-6 h-6 rounded-full border-2 border-slate-300 dark:border-slate-600" });
            };
            return React.createElement('div', { className: "bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg dark:shadow-2xl border border-slate-200 dark:border-slate-700 animate-fade-in" },
                React.createElement('div', { className: "flex flex-col gap-4" },
                    steps.map((step, index) =>
                        React.createElement('div', { key: index, className: "flex items-center gap-4 transition-opacity duration-300" },
                            React.createElement(StatusIcon, { status: step.status }),
                            React.createElement('p', { className: `text-lg ${step.status === 'pending' ? 'text-slate-400 dark:text-slate-500' : 'text-slate-600 dark:text-slate-300'}` }, step.text)
                        )
                    )
                )
            );
        };

        // --- Inlined from components/ErrorDisplay.tsx ---
        const ErrorDisplay = ({ message }) => (
            React.createElement('div', { className: "mt-6 bg-red-100 dark:bg-red-900/50 border border-red-300 dark:border-red-700 text-red-800 dark:text-red-300 px-4 py-3 rounded-lg relative", role: "alert" },
                React.createElement('strong', { className: "font-bold" }, "Error: "),
                React.createElement('span', { className: "block sm:inline" }, message)
            )
        );

        // --- Inlined from components/Modal.tsx ---
        const Modal = ({ title, onClose, children }) => {
            useEffect(() => {
                const handleEsc = (event) => { if (event.key === 'Escape') onClose(); };
                window.addEventListener('keydown', handleEsc);
                document.body.style.overflow = 'hidden';
                return () => {
                    window.removeEventListener('keydown', handleEsc);
                    document.body.style.overflow = 'unset';
                };
            }, [onClose]);
            return React.createElement('div', {
                className: "fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 transition-opacity duration-300 animate-fade-in",
                onClick: onClose, role: "dialog", 'aria-modal': "true", 'aria-labelledby': "modal-title"
            },
                React.createElement('div', {
                    className: "bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col transform transition-transform duration-300 scale-95 animate-scale-in",
                    onClick: (e) => e.stopPropagation()
                },
                    React.createElement('div', { className: "flex justify-between items-center p-5 border-b border-slate-200 dark:border-slate-700" },
                        React.createElement('h2', { id: "modal-title", className: "text-xl font-bold text-slate-900 dark:text-white" }, title),
                        React.createElement('button', { onClick: onClose, className: "text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full p-2", 'aria-label': "Close modal" },
                            React.createElement('svg', { className: "w-6 h-6", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg" },
                                React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: "2", d: "M6 18L18 6M6 6l12 12" })
                            )
                        )
                    ),
                    React.createElement('div', { className: "p-6 overflow-y-auto text-slate-600 dark:text-slate-300" }, children)
                )
            );
        };
        
        // --- Inlined from components/VideoLoader.tsx ---
        const VideoLoader = ({ progressMessage }) => {
            const reassuringMessages = [
                "Just a moment, the AI is warming up its director's chair...", "Brewing some creativity for your video...",
                "Composing the perfect soundtrack...", "Our digital Spielberg is on the case!", "Polishing the pixels to perfection...",
                "Hang tight! Awesome things take a little time.", "The AI is working its magic, scene by scene.",
            ];
            const [message, setMessage] = useState(reassuringMessages[0]);

            useEffect(() => {
                const intervalId = setInterval(() => {
                    setMessage(prevMessage => {
                        const currentIndex = reassuringMessages.indexOf(prevMessage);
                        const nextIndex = (currentIndex + 1) % reassuringMessages.length;
                        return reassuringMessages[nextIndex];
                    });
                }, 4000);
                return () => clearInterval(intervalId);
            }, []);

            return React.createElement('div', { className: "my-8 p-6 bg-slate-100 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-700 animate-fade-in" },
                React.createElement('div', { className: "flex items-center gap-4" },
                    React.createElement('svg', { className: "animate-spin h-8 w-8 text-teal-500 dark:text-teal-400", xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24" },
                        React.createElement('circle', { className: "opacity-25", cx: "12", cy: "12", r: "10", stroke: "currentColor", strokeWidth: "4" }),
                        React.createElement('path', { className: "opacity-75", fill: "currentColor", d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" })
                    ),
                    React.createElement('div', null,
                        React.createElement('p', { className: "text-lg font-semibold text-slate-700 dark:text-slate-200" }, progressMessage),
                        React.createElement('p', { className: "text-sm text-slate-500 dark:text-slate-400" }, message)
                    )
                )
            );
        };

        // --- Inlined from components/VideoPlayer.tsx ---
        const VideoPlayer = ({ videoUrl }) => (
            React.createElement('div', { className: "my-8 animate-fade-in" },
                React.createElement('div', { className: "relative group" },
                    React.createElement('video', { src: videoUrl, controls: true, className: "w-full rounded-lg shadow-md aspect-video", 'aria-label': "Generated article summary video" }, "Your browser does not support the video tag.")
                )
            )
        );

        // --- Inlined from components/VideoStudio.tsx ---
        const VStudio = () => {
            const [prompt, setPrompt] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [videoUrl, setVideoUrl] = useState(null);
            const [error, setError] = useState(null);
            const [progressMessage, setProgressMessage] = useState('');
            
            const handleGenerateVideo = useCallback(async (e) => {
                e.preventDefault();
                if (!prompt.trim()) { setError('Please enter a video prompt.'); return; }
                setError(null); setVideoUrl(null); setIsLoading(true);
                try {
                    const url = await generateArticleVideo(prompt, (message) => setProgressMessage(message));
                    setVideoUrl(url);
                } catch (err) {
                    console.error(err);
                    setError(`Failed to generate video. ${err instanceof Error ? err.message : 'An unknown error occurred.'}`);
                } finally { setIsLoading(false); setProgressMessage(''); }
            }, [prompt]);

            const handleStartNew = () => { setPrompt(''); setVideoUrl(null); setError(null); setIsLoading(false); };
            const downloadFileName = `newzly_video_summary.mp4`;

            return React.createElement('div', { className: "max-w-4xl mx-auto animate-fade-in" },
                React.createElement('div', { className: "bg-white dark:bg-slate-800 p-6 sm:p-8 rounded-2xl shadow-lg dark:shadow-2xl border border-slate-200 dark:border-slate-700" },
                    React.createElement('h2', { className: "text-2xl sm:text-3xl font-bold mb-2 text-center text-transparent bg-clip-text bg-gradient-to-r from-teal-500 to-cyan-500" }, "V'Studio"),
                    React.createElement('p', { className: "text-center text-slate-500 dark:text-slate-400 mb-6" }, "Craft a detailed prompt to generate a unique video summary."),
                    !videoUrl && !isLoading && React.createElement('form', { onSubmit: handleGenerateVideo },
                        React.createElement('textarea', {
                            value: prompt, onChange: (e) => setPrompt(e.target.value),
                            placeholder: "e.g., A fast-paced, energetic video about the future of AI. Scene 1: A wide shot of a futuristic city with flying vehicles. Scene 2: A close-up on a robot's hand typing on a holographic keyboard...",
                            required: true, className: "w-full bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100 border border-slate-300 dark:border-slate-600 rounded-xl px-4 py-3 focus:ring-2 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-800 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition duration-200 disabled:opacity-50 resize-y",
                            rows: 8, disabled: isLoading, 'aria-label': "Video generation prompt"
                        }),
                        React.createElement('button', {
                            type: "submit", disabled: isLoading,
                            className: "mt-4 w-full bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-400 hover:to-cyan-400 text-white font-bold py-4 px-6 rounded-xl transition duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:scale-100 flex items-center justify-center shadow-md hover:shadow-lg"
                        }, isLoading ?
                                React.createElement(React.Fragment, null, React.createElement('svg', { className: "animate-spin -ml-1 mr-3 h-5 w-5 text-white", xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24" }, React.createElement('circle', { className: "opacity-25", cx: "12", cy: "12", r: "10", stroke: "currentColor", strokeWidth: "4" }), React.createElement('path', { className: "opacity-75", fill: "currentColor", d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" })), "Generating...") :
                                React.createElement(React.Fragment, null, React.createElement(VideoIcon, { className: "w-5 h-5 mr-2" }), "Generate Video")
                        )
                    )
                ),
                React.createElement('div', { className: "mt-8" },
                    error && React.createElement(ErrorDisplay, { message: error }),
                    isLoading && React.createElement(VideoLoader, { progressMessage: progressMessage }),
                    videoUrl && !isLoading && React.createElement('div', { className: "animate-fade-in" },
                        React.createElement(VideoPlayer, { videoUrl: videoUrl }),
                        React.createElement('div', { className: "mt-6 flex flex-col sm:flex-row justify-center items-center gap-4" },
                            React.createElement('a', { href: videoUrl, download: downloadFileName, className: "w-full sm:w-auto inline-flex items-center justify-center gap-2 font-bold py-3 px-8 rounded-lg transition-colors duration-200 bg-teal-500 hover:bg-teal-600 text-white shadow-md hover:shadow-lg", 'aria-label': "Download the generated video" },
                                React.createElement(DownloadIcon, { className: "w-5 h-5" }),
                                React.createElement('span', null, "Download Video")
                            ),
                            React.createElement('button', { onClick: handleStartNew, className: "w-full sm:w-auto font-bold py-3 px-8 rounded-lg transition-colors duration-200 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-100" }, "Create Another")
                        )
                    )
                )
            );
        };
        
        // --- Inlined from components/Homepage.tsx ---
        const Homepage = ({ onNavigate }) => {
            const FeatureCard = ({ icon, title, children }) => (
                React.createElement('div', { className: "bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg hover:shadow-xl transition-shadow duration-300 border border-slate-200 dark:border-slate-700" },
                    React.createElement('div', { className: "flex items-center justify-center w-14 h-14 bg-cyan-100 dark:bg-cyan-900/50 rounded-xl mb-5" }, icon),
                    React.createElement('h3', { className: "text-xl font-bold text-slate-800 dark:text-slate-100 mb-2" }, title),
                    React.createElement('p', { className: "text-slate-600 dark:text-slate-300 leading-relaxed" }, children)
                )
            );
            const HowItWorksStep = ({ icon, title, children, step }) => (
                 React.createElement('div', { className: "relative text-center" },
                    React.createElement('div', { className: "flex items-center justify-center w-20 h-20 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-full mx-auto shadow-sm" }, icon),
                    React.createElement('div', { className: "absolute top-1 right-1/2 -translate-y-1/2 translate-x-[4.5rem] bg-cyan-500 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm border-4 border-white dark:border-slate-800" }, step),
                    React.createElement('h3', { className: "text-xl font-bold text-slate-800 dark:text-slate-100 mt-5 mb-2" }, title),
                    React.createElement('p', { className: "text-slate-600 dark:text-slate-300 leading-relaxed" }, children)
                )
            );
            return React.createElement('div', { className: "space-y-24 sm:space-y-32 animate-fade-in" },
                React.createElement('section', { className: "text-center pt-12 pb-16" },
                    React.createElement('h1', { className: "text-5xl sm:text-7xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-cyan-500 to-purple-600 leading-tight" }, "Create Smarter, Faster Content."),
                    React.createElement('p', { className: "mt-6 max-w-2xl mx-auto text-lg sm:text-xl text-slate-600 dark:text-slate-300 leading-relaxed" }, "NEWZLY is your AI-powered suite for generating high-quality news articles, social media campaigns, and stunning summary videos in minutes, not hours."),
                    React.createElement('div', { className: "mt-10 flex flex-col sm:flex-row justify-center items-center gap-4" },
                        React.createElement('button', { onClick: () => onNavigate('nstudio'), className: "w-full sm:w-auto bg-gradient-to-r from-cyan-500 to-purple-600 hover:from-cyan-400 hover:to-purple-500 text-white font-bold py-4 px-8 rounded-xl transition duration-300 ease-in-out transform hover:scale-105 shadow-lg hover:shadow-xl" }, "Launch N'Studio"),
                        React.createElement('button', { onClick: () => onNavigate('vstudio'), className: "w-full sm:w-auto bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 font-bold py-4 px-8 rounded-xl transition-colors duration-200 border border-slate-200 dark:border-slate-700" }, "Launch V'Studio")
                    )
                ),
                React.createElement('section', null,
                    React.createElement('div', { className: "text-center mb-12" },
                         React.createElement('h2', { className: "text-4xl font-bold text-slate-900 dark:text-slate-100" }, "Your Complete Content Toolkit"),
                         React.createElement('p', { className: "mt-3 max-w-xl mx-auto text-lg text-slate-500 dark:text-slate-400" }, "Everything you need to amplify your message and engage your audience.")
                    ),
                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-3 gap-8" },
                        React.createElement(FeatureCard, { icon: React.createElement(ArticleIcon, { className: "w-8 h-8 text-cyan-600 dark:text-cyan-400" }), title: "AI Article Writing" }, "Transform any news URL into a unique, human-like article that's ready to publish."),
                        React.createElement(FeatureCard, { icon: React.createElement(VideoIcon, { className: "w-8 h-8 text-cyan-600 dark:text-cyan-400" }), title: "Instant Video Creation" }, "Generate engaging, high-quality video summaries from any text prompt with our V'Studio."),
                        React.createElement(FeatureCard, { icon: React.createElement(SocialIcon, { className: "w-8 h-8 text-cyan-600 dark:text-cyan-400" }), title: "Social Media Toolkit" }, "Automatically create optimized posts for all major platforms, complete with captions and hashtags.")
                    )
                ),
                React.createElement('section', null,
                    React.createElement('div', { className: "text-center mb-16" },
                         React.createElement('h2', { className: "text-4xl font-bold text-slate-900 dark:text-slate-100" }, "Simple 3-Step Process"),
                         React.createElement('p', { className: "mt-3 max-w-xl mx-auto text-lg text-slate-500 dark:text-slate-400" }, "Go from idea to published content in record time.")
                    ),
                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-3 gap-16 max-w-5xl mx-auto" },
                        React.createElement(HowItWorksStep, { icon: React.createElement(InputIcon, { className: "w-9 h-9 text-purple-600 dark:text-purple-400" }), title: "Input", step: 1 }, "Provide a news URL for an article or a detailed text prompt for a video."),
                        React.createElement(HowItWorksStep, { icon: React.createElement(LogoIcon, { className: "w-9 h-9 text-purple-600 dark:text-purple-400" }), title: "Generate", step: 2 }, "Let our powerful AI analyze your input and craft original content in seconds."),
                        React.createElement(HowItWorksStep, { icon: React.createElement(PublishIcon, { className: "w-9 h-9 text-purple-600 dark:text-purple-400" }), title: "Publish", step: 3 }, "Edit, refine, and use the generated content and social posts to reach your audience.")
                    )
                )
            );
        };
        
        // --- Inlined from components/Footer.tsx ---
        const Footer = ({ onNavigate, onShowModal }) => (
            React.createElement('footer', { className: "bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 mt-16" },
                React.createElement('div', { className: "container mx-auto px-4 py-16 max-w-7xl" },
                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12" },
                        React.createElement('div', { className: "lg:col-span-2" },
                            React.createElement('div', { className: "flex items-center gap-3 mb-4" },
                                React.createElement(NewzlyLogoIcon, { className: "h-8 w-8 text-slate-900 dark:text-white" }),
                                React.createElement('h3', { className: "text-2xl font-extrabold text-slate-900 dark:text-white" }, "NEWZLY")
                            ),
                            React.createElement('p', { className: "text-slate-500 dark:text-slate-400 max-w-sm leading-relaxed" }, "Your AI-powered suite for generating high-quality news articles, social media campaigns, and stunning summary videos in minutes.")
                        ),
                        React.createElement('div', null,
                            React.createElement('h4', { className: "font-semibold text-slate-900 dark:text-slate-100 mb-4 tracking-wide" }, "Quick Links"),
                            React.createElement('ul', { className: "space-y-3" },
                                React.createElement('li', null, React.createElement('button', { onClick: () => onNavigate('nstudio'), className: "text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 transition-colors" }, "N'Studio")),
                                React.createElement('li', null, React.createElement('button', { onClick: () => onNavigate('vstudio'), className: "text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 transition-colors" }, "V'Studio"))
                            )
                        ),
                        React.createElement('div', null,
                            React.createElement('h4', { className: "font-semibold text-slate-900 dark:text-slate-100 mb-4 tracking-wide" }, "Resources"),
                            React.createElement('ul', { className: "space-y-3" },
                                React.createElement('li', null, React.createElement('button', { onClick: () => onShowModal('about'), className: "text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 transition-colors" }, "About")),
                                React.createElement('li', null, React.createElement('button', { onClick: () => onShowModal('contact'), className: "text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 transition-colors" }, "Contact")),
                                React.createElement('li', null, React.createElement('button', { onClick: () => onShowModal('privacy'), className: "text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 transition-colors" }, "Privacy Policy")),
                                React.createElement('li', null, React.createElement('button', { onClick: () => onShowModal('terms'), className: "text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 transition-colors" }, "Terms & Conditions"))
                            )
                        )
                    ),
                    React.createElement('div', { className: "mt-16 pt-8 border-t border-slate-200 dark:border-slate-700 text-center text-sm text-slate-500 dark:text-slate-400" },
                        React.createElement('p', null, ` ${new Date().getFullYear()} NEWZLY. All Rights Reserved.`),
                        React.createElement('p', { className: "mt-2" }, "Powered by the Google Gemini API")
                    )
                )
            )
        );
        
        // --- Inlined from services/geminiService.ts ---
        if (!window.API_KEY) {
          throw new Error("API_KEY is not configured. Please set window.API_KEY before this script runs.");
        }
        const ai = new GoogleGenAI({ apiKey: window.API_KEY });

        const getApiErrorMessage = (e, serviceName) => {
            console.error(`${serviceName} failed:`, e);
            if (e instanceof Error) {
                try {
                    const errorJson = JSON.parse(e.message);
                    if (errorJson?.error?.message) {
                        if (errorJson.error.status === 'RESOURCE_EXHAUSTED') return `${serviceName} failed due to API quota limits. Please check your plan and billing details.`;
                        return `${serviceName} failed: ${errorJson.error.message}`;
                    }
                } catch (jsonParseError) {}
                return e.message;
            }
            return `An unknown error occurred during ${serviceName}.`;
        };
        const articleGenerationPrompt = (url, language, seoKeywords) => {
            const keywordInstruction = seoKeywords.trim() ? `
        **SEO Keyword Integration:**
        You have been provided with the following list of SEO keywords: "${seoKeywords}".
        *   **Headline:** At least one of the primary keywords must be naturally integrated into the headline.
        *   **Article Body:** Weave these keywords naturally throughout the article content, especially in subheadings and the first few paragraphs. Do not "keyword stuff". The integration must feel organic and relevant to the context. Aim for a sensible keyword density.
        ` : '';
            return `
        **Persona:**
        Assume the persona of a seasoned, witty journalist for a top-tier online publication known for its sharp, insightful tech and culture commentary. You are writing an in-depth feature article, not a dry news report. Your goal is to inform, engage, and make the reader think.
        **Primary Task:**
        Write a 100% original, deeply researched, and highly engaging news article in ${language}. The article's foundation is the content from this URL: ${url}. You must synthesize the information, not just rephrase it, and build a compelling new narrative.
        ${keywordInstruction}
        **Article Structure & Content Guidelines:**
        1.  **Captivating Headline:** Create a headline that is intriguing and informative but avoids cheap clickbait.
        2.  **Hooking Introduction (1-2 paragraphs):** Start with a powerful hooka surprising fact, a relatable anecdote, or a provocative question that grabs the reader's attention immediately. Set the scene and state why this topic is important right now.
        3.  **Main Body (Multiple Sections):**
            *   Break the core story into logical sections using clear, compelling subheadings (Markdown: '## Subheading').
            *   For each section, go beyond surface-level facts. Explain the 'why' and 'how'.
            *   Incorporate different perspectives. If there are debates or opposing views, present them. Use phrases like "On one hand..." or "Critics, however, point out...".
            *   Weave in a human element. Use illustrative examples, or synthesized quotes (e.g., "according to one industry insider," or "as one user on a forum aptly put it,") to make the story more relatable.
        4.  **Insight & Analysis (1-2 paragraphs):** This is crucial. What are the broader implications of this news? What does it mean for the industry, for society, for the reader? Connect the dots and offer a unique perspective.
        5.  **Forward-Looking Conclusion (1 paragraph):** Do not just summarize. End with a thought-provoking statement, a question about the future, or a final, powerful insight that leaves a lasting impression on the reader.
        **Style & Tone Requirements:**
        *   **Language:** The entire output must be in ${language}.
        *   **Voice:** Authoritative, intelligent, and conversational with a touch of wit. Write like a smart, interesting person speaks.
        *   **Sentence Fluency:** Vary your sentence structure. Use a mix of short, punchy statements and longer, more descriptive sentences to create a dynamic reading rhythm.
        *   **Vivid Language:** Use strong verbs, metaphors, and clear analogies to explain complex ideas.
        *   **STRICTLY AVOID:**
            *   AI clichs ("In today's fast-paced world...", "As we delve deeper...", "The landscape is ever-evolving...").
            *   Robotic, overly formal, or academic language.
            *   Jargon without explanation.
            *   Emojis or hyperlinks.
        *   **Length:** Aim for a comprehensive feature piece, around 12001800 words.
        **Output Format:**
        Return a single, valid JSON object with the exact keys: "title", "imagePrompt", "videoPrompt", and "articleContent". Ensure the "articleContent" value contains the full article formatted with Markdown subheadings.
        `;
        };
        const articleSchema = {
            type: Type.OBJECT,
            properties: {
                title: { type: Type.STRING, description: 'A clickbait yet professional title.' },
                imagePrompt: { type: Type.STRING, description: "Create a safe-for-work (SFW), high-quality, photorealistic 16:9 feature image prompt. The prompt must be purely descriptive of a visual scene, avoiding any names, controversial topics, or ambiguous terms that could be misinterpreted. Focus on creating a visually appealing, generic, and universally acceptable image. Do not ask for any text to be rendered in the image." },
                videoPrompt: { type: Type.STRING, description: "Generate a highly descriptive, scene-by-scene prompt for a 15-30 second video summarizing the article. The prompt must be a single string. It should specify: \n1. **Overall Tone:** (e.g., 'inspirational and hopeful', 'urgent and informative', 'sleek and futuristic'). \n2. **Key Visuals & Cinematography:** For several short scenes, describe specific, dynamic imagery based on the article. For each scene, specify **camera angles** (e.g., 'dramatic wide shot', 'intense close-up on a face', 'sweeping drone shot') and **scene transitions** (e.g., 'a quick cut to the next scene', 'a slow fade to black', 'a dynamic wipe effect'). Example: 'Scene 1: A wide shot of a bustling city skyline at dawn, followed by a quick cut to... Scene 2: A close-up of a scientist's hands working on a glowing device.' \n3. **Text Overlays:** Include specific, concise text to appear on screen for key statistics or powerful quotes. \n4. **Music Style:** Suggest a genre of royalty-free background music that matches the tone (e.g., 'Uplifting corporate electronic track,' 'Cinematic orchestral score'). \n5. **Call to Action:** End with a simple, engaging question or statement for the viewer (e.g., 'What do you think the future holds?', 'Read the full story to learn more.'). The entire output should be a single, coherent paragraph." },
                articleContent: { type: Type.STRING, description: "The full news article (10001500 words) in the specified language, following all the rules, with subheadings prefixed by '##'." },
            },
            required: ["title", "imagePrompt", "videoPrompt", "articleContent"],
        };
        const generateArticleFromUrl = async (url, model, language, seoKeywords) => {
            console.log(`Generating article for URL: ${url} with model: ${model} in language: ${language} using keywords: ${seoKeywords}`);
            let response;
            try {
                response = await ai.models.generateContent({ model, contents: articleGenerationPrompt(url, language, seoKeywords), config: { responseMimeType: "application/json", responseSchema: articleSchema } });
            } catch (e) { throw new Error(getApiErrorMessage(e, 'Article generation')); }
            const jsonText = response.text.trim();
            try {
                const parsedArticle = JSON.parse(jsonText);
                if (parsedArticle.title && parsedArticle.imagePrompt && parsedArticle.videoPrompt && parsedArticle.articleContent) return parsedArticle;
                else throw new Error("Parsed JSON is missing required article fields.");
            } catch (e) {
                console.error("Failed to parse JSON response:", { jsonText, error: e });
                throw new Error("Failed to parse the structured article from the AI response. The format was unexpected.");
            }
        };
        const generateFeatureImage = async (prompt) => {
            console.log("Generating image with prompt:", prompt);
            try {
                const response = await ai.models.generateImages({ model: 'imagen-4.0-generate-001', prompt, config: { numberOfImages: 1, outputMimeType: 'image/jpeg', aspectRatio: '16:9' } });
                if (response.generatedImages?.[0]?.image?.imageBytes) {
                    return `data:image/jpeg;base64,${response.generatedImages[0].image.imageBytes}`;
                } else {
                    console.error("Image generation API call succeeded but returned no images. This is often due to safety filters.", { prompt, response });
                    throw new Error("The generated image prompt was blocked by safety filters. Try generating the article again to get a new prompt.");
                }
            } catch (e) { throw new Error(getApiErrorMessage(e, 'Image generation')); }
        };
        const generateSocialPostImage = async (prompt) => {
            console.log("Generating social post image with prompt:", prompt);
            try {
                const response = await ai.models.generateImages({ model: 'imagen-4.0-generate-001', prompt, config: { numberOfImages: 1, outputMimeType: 'image/jpeg', aspectRatio: '1:1' } });
                if (response.generatedImages?.[0]?.image?.imageBytes) {
                    return `data:image/jpeg;base64,${response.generatedImages[0].image.imageBytes}`;
                } else {
                    console.error("Social image generation API call succeeded but returned no images.", { prompt, response });
                    throw new Error("The image prompt was blocked or returned no content. Please try regenerating.");
                }
            } catch (e) { throw new Error(getApiErrorMessage(e, 'Social image generation')); }
        };
        const socialMediaPrompt = (articleContent) => `
        Based on the following news article, create a series of SEO-optimized social media posts.
        For each post, provide:
        1. A compelling caption.
        2. A list of relevant hashtags, with each hashtag STARTING WITH the '#' symbol.
        3. A safe-for-work (SFW), purely descriptive prompt for a visually appealing, postcard-style square (1:1 aspect ratio) image. The prompt must avoid names, controversial topics, or ambiguous terms. Focus on creating a positive or neutral, generic, and universally acceptable image. Do not ask for any text to be rendered in the image.
        Article:
        ---
        ${articleContent}
        ---
        Generate posts for the following platforms: Facebook, Instagram, Twitter, and LinkedIn. Your output must be in JSON format.
        `;
        const socialPostSchema = {
            type: Type.ARRAY,
            items: {
                type: Type.OBJECT,
                properties: {
                    platform: { type: Type.STRING, enum: ['Facebook', 'Instagram', 'Twitter', 'LinkedIn'], description: "The social media platform." },
                    caption: { type: Type.STRING, description: "A compelling caption for the post." },
                    hashtags: { type: Type.ARRAY, items: { type: Type.STRING }, description: "An array of relevant hashtags, each one starting with '#' ." },
                    imagePrompt: { type: Type.STRING, description: "A detailed, SFW prompt for generating a postcard-style image, avoiding names, controversial topics, or ambiguous terms." }
                },
                required: ["platform", "caption", "hashtags", "imagePrompt"]
            }
        };
        const generateSocialMediaPosts = async (articleContent) => {
            console.log("Generating social media posts...");
            let response;
            try {
                response = await ai.models.generateContent({ model: "gemini-2.5-flash", contents: socialMediaPrompt(articleContent), config: { responseMimeType: "application/json", responseSchema: socialPostSchema } });
            } catch (e) { throw new Error(getApiErrorMessage(e, 'Social post generation')); }
            const jsonText = response.text.trim();
            const parsed = JSON.parse(jsonText);
            return parsed.map((post) => ({ ...post, platform: post.platform }));
        };
        const generateArticleVideo = async (prompt, onProgress) => {
            console.log("Generating video with prompt:", prompt);
            onProgress("Initializing video render...");
            try {
                let operation = await ai.models.generateVideos({ model: 'veo-2.0-generate-001', prompt, config: { numberOfVideos: 1 } });
                onProgress("Rendering video... (this may take a few minutes)");
                while (!operation.done) {
                    await new Promise(resolve => setTimeout(resolve, 10000));
                    operation = await ai.operations.getVideosOperation({ operation: operation });
                }
                onProgress("Finalizing video...");
                const downloadLink = operation.response?.generatedVideos?.[0]?.video?.uri;
                if (!downloadLink) throw new Error("Video generation succeeded but no download link was returned.");
                onProgress("Fetching video data...");
                const response = await fetch(`${downloadLink}&key=${window.API_KEY}`);
                if (!response.ok) throw new Error(`Failed to download video file. Status: ${response.status}`);
                const videoBlob = await response.blob();
                const videoUrl = URL.createObjectURL(videoBlob);
                onProgress("Video generation complete!");
                return videoUrl;
            } catch(e) { throw new Error(getApiErrorMessage(e, 'Video generation')); }
        };
        
        // --- Inlined from App.tsx ---
        const App = () => {
            const [isLoading, setIsLoading] = useState(false);
            const [loadingSteps, setLoadingSteps] = useState([]);
            const [isSocialLoading, setIsSocialLoading] = useState(false);
            const [article, setArticle] = useState(null);
            const [featureImage, setFeatureImage] = useState(null);
            const [socialPosts, setSocialPosts] = useState(null);
            const [error, setError] = useState(null);
            const [model, setModel] = useState('gemini-2.5-flash');
            const [language, setLanguage] = useState('English');
            const [seoKeywords, setSeoKeywords] = useState('');
            const [activeModal, setActiveModal] = useState(null);
            const [activeView, setActiveView] = useState('homepage');
            const [theme, setTheme] = useState(() => {
                try {
                    const storedTheme = localStorage.getItem('newzly-theme');
                    if (storedTheme) return storedTheme;
                    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
                } catch (e) { return 'light'; }
            });

            useEffect(() => {
                const root = document.documentElement;
                if (theme === 'light') root.classList.remove('dark');
                else root.classList.add('dark');
                try { localStorage.setItem('newzly-theme', theme); } catch (e) { console.error("Failed to save theme to localStorage", e); }
            }, [theme]);
            
            useEffect(() => {
                const defaultTitle = 'NEWZLY - AI News Writer & Video Creator';
                const defaultDescription = 'An AI-powered platform to generate professional, human-like news articles from a URL and create stunning summary videos.';
                const metaDescriptionTag = document.querySelector('meta[name="description"]');
                if (activeView === 'nstudio' && article) {
                    document.title = `${article.title} | NEWZLY`;
                    if (metaDescriptionTag) {
                        const firstParagraph = article.articleContent.split('\n').find(p => p.trim().length > 0) || '';
                        const snippet = firstParagraph.substring(0, 160).trim();
                        metaDescriptionTag.setAttribute('content', snippet.length >= 160 ? `${snippet}...` : snippet);
                    }
                } else if (activeView === 'nstudio') {
                    document.title = `N'Studio | NEWZLY`;
                    if (metaDescriptionTag) metaDescriptionTag.setAttribute('content', 'Generate unique, human-like news articles from any URL with the NEWZLY AI N\'Studio.');
                } else if (activeView === 'vstudio') {
                    document.title = `V'Studio | NEWZLY`;
                    if (metaDescriptionTag) metaDescriptionTag.setAttribute('content', 'Generate compelling summary videos from any text prompt using the NEWZLY AI V\'Studio.');
                } else {
                    document.title = defaultTitle;
                    if (metaDescriptionTag) metaDescriptionTag.setAttribute('content', defaultDescription);
                }
            }, [article, activeView]);

            const toggleTheme = () => setTheme(prevTheme => prevTheme === 'dark' ? 'light' : 'dark');

            useEffect(() => {
                try {
                    const savedArticle = localStorage.getItem('newzly-article');
                    const savedImage = localStorage.getItem('newzly-feature-image');
                    const savedSocialPosts = localStorage.getItem('newzly-social-posts');
                    if (savedArticle) setArticle(JSON.parse(savedArticle));
                    if (savedImage) setFeatureImage(savedImage);
                    if (savedSocialPosts) setSocialPosts(JSON.parse(savedSocialPosts));
                } catch (e) { console.error("Failed to load data from localStorage", e); localStorage.clear(); }
            }, []);

            useEffect(() => { if (article) localStorage.setItem('newzly-article', JSON.stringify(article)); else localStorage.removeItem('newzly-article'); }, [article]);
            useEffect(() => { if (featureImage) localStorage.setItem('newzly-feature-image', featureImage); else localStorage.removeItem('newzly-feature-image'); }, [featureImage]);
            useEffect(() => { if (socialPosts) localStorage.setItem('newzly-social-posts', JSON.stringify(socialPosts)); else localStorage.removeItem('newzly-social-posts'); }, [socialPosts]);

            const handleClear = useCallback(() => {
                setArticle(null); setFeatureImage(null); setSocialPosts(null); setError(null); setLoadingSteps([]); setIsSocialLoading(false);
            }, []);

            const handleArticleGeneration = useCallback(async (url) => {
                if (!url) { setError('Please enter a valid URL.'); return; }
                handleClear(); setError(null); setIsLoading(true);
                const initialSteps = [
                    { text: 'Analyzing URL and crafting article...', status: 'active' }, { text: 'Generating feature image...', status: 'pending' }, { text: 'Finalizing content...', status: 'pending' },
                ]; setLoadingSteps(initialSteps);
                try {
                    const genArticle = await generateArticleFromUrl(url, model, language, seoKeywords);
                    setArticle(genArticle);
                    setLoadingSteps(prev => prev.map((s, i) => i === 0 ? { ...s, status: 'done' } : (i === 1 ? { ...s, status: 'active' } : s)));
                    const image = await generateFeatureImage(genArticle.imagePrompt);
                    setFeatureImage(image);
                    setLoadingSteps(prev => prev.map((s, i) => i <= 1 ? { ...s, status: 'done' } : (i === 2 ? { ...s, status: 'active' } : s)));
                    setLoadingSteps(prev => prev.map(s => ({ ...s, status: 'done' })));
                } catch (e) {
                    console.error(e); setError(`Failed to generate the article. ${e instanceof Error ? e.message : 'An unknown error occurred.'}`); setLoadingSteps([]);
                } finally { setIsLoading(false); }
            }, [model, language, seoKeywords]);
            
            const handleSocialPostGeneration = useCallback(async () => {
                if (!article) return; setError(null); setIsSocialLoading(true); setSocialPosts(null);
                try {
                    const posts = await generateSocialMediaPosts(article.articleContent);
                    setSocialPosts(posts);
                } catch (e) { console.error(e); setError('Failed to generate social media posts. Please try again.');
                } finally { setIsSocialLoading(false); }
            }, [article]);
            
            const handleShowModal = (modal) => setActiveModal(modal);
            const handleCloseModal = () => setActiveModal(null);
            const handleNavigate = (view) => { setActiveView(view); if (error && view !== 'nstudio') setError(null); };

            const getModalContent = () => {
                switch (activeModal) {
                    case 'privacy': return { title: 'Privacy Policy', content: React.createElement('div', { className: "space-y-4" }, React.createElement('p', null, "Your privacy is important to us. This policy explains what information we collect and how we use it."), React.createElement('h3', { className: "font-bold text-lg text-slate-800 dark:text-slate-100" }, "Information We Collect"), React.createElement('p', null, React.createElement('strong', null, "Article Content:"), " The URL you provide is sent to the Gemini API to generate content. We do not store the URLs or the generated articles on our servers."), React.createElement('p', null, React.createElement('strong', null, "Local Storage:"), " To enhance your experience, the generated article, feature image, and social media posts are saved in your browser's local storage. This allows you to resume your session later. This data is stored only on your device and is not transmitted to us."), React.createElement('p', null, React.createElement('strong', null, "Theme Preference:"), " We save your preferred theme (light/dark) in local storage for a consistent experience across visits."), React.createElement('h3', { className: "font-bold text-lg text-slate-800 dark:text-slate-100" }, "Third-Party Services"), React.createElement('p', null, "This application uses the Google Gemini API to generate content. Your requests, including the content from the URLs you provide, are processed by Google. We recommend reviewing Google's privacy policy for more information on how they handle data."), React.createElement('h3', { className: "font-bold text-lg text-slate-800 dark:text-slate-100" }, "Data Security"), React.createElement('p', null, "Since we do not store your personal data on our servers, the primary security concern is the data stored locally on your device. You can clear this data at any time by clicking the \"Start New\" button or clearing your browser's cache.")) };
                    case 'contact': return { title: 'Contact Us', content: React.createElement('div', { className: "space-y-4" }, React.createElement('p', null, "We'd love to hear from you! Whether you have a question about features, trials, or anything else, our team is ready to answer all your questions."), React.createElement('p', null, "For support, feedback, or inquiries, please reach out to us via email:"), React.createElement('a', { href: "mailto:support@newzly.app", className: "text-cyan-500 hover:text-cyan-400 font-medium" }, "support@newzly.app")) };
                    case 'about': return { title: 'About NEWZLY', content: React.createElement('div', { className: "space-y-4" }, React.createElement('p', null, React.createElement('strong', null, "NEWZLY"), " is a powerful AI-driven platform designed to revolutionize the way news articles and social media content are created. Our mission is to empower journalists, content creators, and marketing professionals by providing them with a tool that generates high-quality, human-like, and SEO-optimized content in a matter of seconds."), React.createElement('p', null, "In a fast-paced digital world, staying relevant and producing fresh content consistently is a challenge. NEWZLY bridges this gap by leveraging the cutting-edge capabilities of Google's Gemini API. Simply provide a link to an existing news article, and our AI will craft a completely new, plagiarism-free piece that maintains a natural, conversational tone."), React.createElement('h3', { className: "font-bold text-lg text-slate-800 dark:text-slate-100" }, "Key Features:"), React.createElement('ul', { className: "list-disc list-inside space-y-2" }, React.createElement('li', null, React.createElement('strong', null, "Human-Like Article Generation:"), " Creates articles that are indistinguishable from those written by experienced human journalists."), React.createElement('li', null, React.createElement('strong', null, "Social Media Toolkit:"), " Automatically generates optimized posts for various platforms, complete with engaging captions and relevant hashtags."), React.createElement('li', null, React.createElement('strong', null, "Customization:"), " Edit and refine all generated content to add your personal touch before publishing."), React.createElement('li', null, React.createElement('strong', null, "Efficiency:"), " Drastically reduces the time and effort required to produce high-quality content.")), React.createElement('p', null, "We believe in the synergy of human creativity and artificial intelligence. NEWZLY isn't here to replace writers, but to be their most powerful assistant.")) };
                    case 'terms': return { title: 'Terms & Conditions', content: React.createElement('div', { className: "space-y-4" }, React.createElement('p', null, "Welcome to NEWZLY. By using our application, you agree to these terms."), React.createElement('h3', { className: "font-bold text-lg text-slate-800 dark:text-slate-100" }, "Use of Service"), React.createElement('p', null, "NEWZLY provides an AI-powered content generation service. You are responsible for the content you generate and must ensure it complies with all applicable laws and does not infringe on any third-party rights. You agree not to use the service for generating harmful, illegal, or malicious content."), React.createElement('h3', { className: "font-bold text-lg text-slate-800 dark:text-slate-100" }, "Generated Content"), React.createElement('p', null, "The content generated by the AI is for your use, but we do not claim ownership or guarantee its accuracy, uniqueness, or suitability for any purpose. The responsibility for fact-checking and ensuring the appropriateness of the content lies with you, the user."), React.createElement('h3', { className: "font-bold text-lg text-slate-800 dark:text-slate-100" }, "API Usage"), React.createElement('p', null, "The service relies on the Google Gemini API. Your use of NEWZLY is also subject to Google's API policies. Excessive or abusive usage may result in temporary or permanent suspension of access."), React.createElement('h3', { className: "font-bold text-lg text-slate-800 dark:text-slate-100" }, "Limitation of Liability"), React.createElement('p', null, "NEWZLY is provided \"as is\" without any warranties. We are not liable for any damages or losses resulting from your use of the application."), React.createElement('h3', { className: "font-bold text-lg text-slate-800 dark:text-slate-100" }, "Changes to Terms"), React.createElement('p', null, "We may update these terms from time to time. Continued use of the service after changes constitutes acceptance of the new terms.")) };
                    default: return { title: '', content: null };
                }
            };
            const modalData = getModalContent();

            const renderStudio = () => {
                switch (activeView) {
                    case 'nstudio': return React.createElement(React.Fragment, null,
                        React.createElement('div', { className: "bg-white dark:bg-slate-800 p-6 sm:p-8 rounded-2xl shadow-lg dark:shadow-2xl border border-slate-200 dark:border-slate-700 max-w-4xl mx-auto" },
                            React.createElement('h2', { className: "text-2xl sm:text-3xl font-bold mb-2 text-center text-transparent bg-clip-text bg-gradient-to-r from-cyan-500 to-purple-600" }, "N'Studio"),
                            React.createElement('p', { className: "text-center text-slate-500 dark:text-slate-400 mb-6" }, "Provide a news article link and let AI craft a unique, professional piece for you."),
                            React.createElement(UrlInputForm, { onSubmit: handleArticleGeneration, isLoading: isLoading }),
                            React.createElement(GenerationOptions, { model, onModelChange: setModel, language, onLanguageChange: setLanguage, seoKeywords, onSeoKeywordsChange: setSeoKeywords, isLoading })
                        ),
                        React.createElement('div', { className: "mt-8" },
                            error && React.createElement(ErrorDisplay, { message: error }),
                            isLoading && loadingSteps.length > 0 && React.createElement('div', { className: "max-w-4xl mx-auto" }, React.createElement(Loader, { steps: loadingSteps })),
                            React.createElement('div', { className: "grid grid-cols-1 lg:grid-cols-5 lg:gap-8 mt-8" },
                                React.createElement('div', { className: "lg:col-span-3" },
                                    article && React.createElement(ArticleDisplay, { article, onArticleUpdate: setArticle, featureImage, onGenerateSocial: handleSocialPostGeneration, isSocialLoading })
                                ),
                                React.createElement('div', { className: "lg:col-span-2" },
                                    isSocialLoading && React.createElement('div', { className: "mt-8 lg:mt-0 bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg dark:shadow-2xl border border-slate-200 dark:border-slate-700" },
                                        React.createElement('div', { className: "flex flex-col items-center justify-center gap-4 py-8" },
                                            React.createElement('svg', { className: "animate-spin h-10 w-10 text-purple-500 dark:text-purple-400", xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24" },
                                                React.createElement('circle', { className: "opacity-25", cx: "12", cy: "12", r: "10", stroke: "currentColor", strokeWidth: "4" }),
                                                React.createElement('path', { className: "opacity-75", fill: "currentColor", d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" })
                                            ),
                                            React.createElement('p', { className: "text-lg text-slate-600 dark:text-slate-300" }, "Optimizing posts for social media...")
                                        )
                                    ),
                                    socialPosts && React.createElement(SocialMediaPosts, { posts: socialPosts, onRegenerate: handleSocialPostGeneration })
                                )
                            )
                        )
                    );
                    case 'vstudio': return React.createElement(VStudio, null);
                    case 'homepage': default: return React.createElement(Homepage, { onNavigate: handleNavigate });
                }
            };
            
            return React.createElement('div', { className: "min-h-screen bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100 font-sans transition-colors duration-300 flex flex-col" },
                React.createElement(Header, { onClear: handleClear, hasContent: !!article, theme, onToggleTheme: toggleTheme, onShowModal: handleShowModal, activeView, onNavigate: handleNavigate }),
                React.createElement('main', { className: "container mx-auto px-4 py-12 max-w-7xl flex-grow" }, renderStudio()),
                React.createElement(Footer, { onNavigate: handleNavigate, onShowModal: handleShowModal }),
                activeModal && React.createElement(Modal, { title: modalData.title, onClose: handleCloseModal }, modalData.content)
            );
        };

        // --- Inlined from index.tsx (entrypoint) ---
        const rootElement = document.getElementById('root');
        if (!rootElement) {
          throw new Error("Could not find root element to mount to");
        }
        const root = ReactDOM.createRoot(rootElement);
        root.render(React.createElement(React.StrictMode, null, React.createElement(App, null)));
    } catch (error) {
        // Graceful error handling for initialization failures (e.g., missing API key)
        const rootElement = document.getElementById('root');
        if (rootElement) {
            let instruction = '';
            if (error.message && error.message.includes('API_KEY is not configured')) {
                instruction = `<p style="margin-top: 1rem;"><strong>To fix this:</strong> Add a script tag with your API key right before the main application script in your HTML. For example:</p>
                <pre style="font-family: monospace; background-color: #fee2e2; padding: 0.5rem 1rem; border-radius: 0.5rem; color: #991b1b; overflow-wrap: break-word; text-align: left; margin-top: 0.5rem;">&lt;script&gt;window.API_KEY = 'YOUR_GOOGLE_AI_API_KEY';&lt;/script&gt;</pre>`;
            }
            rootElement.innerHTML = `<div style="font-family: 'Inter', sans-serif; color: #dc2626; background-color: #fef2f2; border: 1px solid #fecaca; border-radius: 0.75rem; padding: 2rem; margin: 2rem; max-w: 800px; margin-left: auto; margin-right: auto;">
                <h2 style="font-size: 1.5rem; font-weight: 700; color: #b91c1c; margin-bottom: 1rem;">Application Initialization Failed</h2>
                <p style="margin-bottom: 0.5rem;">The application could not start due to a configuration error.</p>
                <p style="font-family: monospace; background-color: #fee2e2; padding: 0.5rem 1rem; border-radius: 0.5rem; color: #991b1b; overflow-wrap: break-word;">${error.message}</p>
                ${instruction}
            </div>`;
        }
        console.error("Application failed to initialize:", error);
    }
    </script>
  </body>
</html>